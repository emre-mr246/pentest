import os


def read_lines(file_path):
    with open(file_path, "r") as file:
        lines = file.readlines()
    return [line.strip() for line in lines if line.strip()]


def append_to_hosts(ip_address, hostnames):
    hosts_entry = f"{ip_address} " + " ".join(hostnames) + "\n"

    if not os.access("/etc/hosts", os.W_OK):
        raise PermissionError("Insufficient permissions. You may need to run this script with sudo.")
    with open("/etc/hosts", "a") as hosts_file:
        hosts_file.write(hosts_entry)


def main(file_path, ip_address):
    try:
        hostnames = read_lines(file_path)
        if hostnames:
            append_to_hosts(ip_address, hostnames)
            print(f"Hostnames successfully added to /etc/hosts with IP address {ip_address}.")
        else:
            print("The file is empty or contains no valid hostnames.")
    except PermissionError as e:
        print(f"Error: {e}")
    except Exception as e:
        print(f"An error occurred: {e}")


ip_address = input("IP Address: ")
file_path = input("vHost File: ")

main(file_path, ip_address)
